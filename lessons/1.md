# Aula 1 - Um exemplo da vida real

Quando estamos iniciando em um projeto de software, na maioria das vezes, algum (ou muito) c√≥digo j√° existe, e n√£o s√£o todos que tem o privil√©gio de trabalhar nos chamados _green field projects_, ou seja, projetos que est√£o come√ßando do zero.

Estruturei este curso trazendo situa√ß√µes reais de projetos de software, por√©m em uma escala menor, para focarmos no aprendizado de diferentes conceitos e t√©cnicas, onde voc√™ ir√° trabalhar com uma base de c√≥digo existente, com alguns testes j√° escritos (nem sempre da melhor forma) e com cen√°rios de teste ainda √† serem cobertos.

A aplica√ß√£o em teste √© chamada [**Hacker Stories**](https://github.com/wlsf82/hacker-stories) e foi desenvolvida baseada nos exerc√≠cios do livro [**The Road to React**](https://www.roadtoreact.com), escrito por [**Robin Wieruch**](https://www.robinwieruch.de), um livro que altamente recomendo √† qualquer um interessado em aprender ou se aprimorar no framework **React**.

A aplica√ß√£o foi escrita em [**TypeScript**](https://www.typescriptlang.org) utilizando [**React**](https://reactjs.org) no _frontend_, a [**API p√∫bilica do Hackernews**](https://hn.algolia.com/api) como "backend", e encontra-se hospedada no [**Firebase**](https://firebase.google.com).

**Obs.:** Apesar da aplica√ß√£o ter sido escrita em **TypeScript**, os testes deste curso foram (e continuar√£o sendo) escritos em **JavaScript** para facilitar a sua vida.

**Aten√ß√£o: n√£o execute testes de performance contra a aplica√ß√£o do curso! Ela n√£o √© destinada para isso.**

## Funcionalidades da aplica√ß√£o

A **principal funcionalidade** da aplica√ß√£o **Hacker Stories** √© realizar buscas via API do Hackernews e listar os resultados de 20 em 20, com t√≠tulo, autor, n√∫mero de coment√°rios e pontua√ß√£o.

Quando acessada pela primeira vez, por padr√£o a aplica√ß√£o faz uma busca pelo termo **'React'**. Dessa forma, podemos garantir que a mesma est√° integrada corretamente com a API desde o in√≠cio.

Al√©m disso, o √∫ltimo termo buscado √© guardado no `localStorage` do navegador, para que no caso de um _refresh_, o mesmo esteja dispon√≠vel no campo de busca.

Cada hist√≥ria (_story_) possui um bot√£o que a remove da lista.

Al√©m disso, √© poss√≠vel ordenar os resultados da busca, de forma crescente ou decrescente, por t√≠tulo, autor, n√∫mero de coment√°rios e pontua√ß√£o.

Ap√≥s a listagem das primeiras 20 hist√≥rias √© poss√≠vel clicar o bot√£o _More_ para buscar pelas pr√≥ximas 20 hist√≥rias (algo como uma pagina√ß√£o).

Tamb√©m existe a funcionalidade dos √∫ltimos termos buscados, onde um m√°ximo de 5 bot√µes s√£o exibidos abaixo do campo de busca, com o texto dos √∫ltimos termos buscados, para consulta r√°pida.

Por fim, caso ocorra um erro na busca, um componente de _fallback_ √© exibido ao usu√°rio com a mensagem "_Something went wrong ..._"

**Obs.:** Nesta vers√£o da aplica√ß√£o, n√£o h√° cache dos resultados, ou seja, cada busca faz uma nova requisi√ß√£o √† API.

## Os testes existentes

A aplica√ß√£o **Hacker Stories** j√° possui testes _end-to-end_. Eles s√£o:

* Teste que garante que o _footer_ √© exibido, visto que para o bot√£o de remover uma hist√≥ria utilizei um √≠cone do [**Freepick**](https://www.flaticon.com/authors/freepik) e preciso cit√°lo em algum lugar para dar-lhe os cr√©ditos
* Teste que garante que 20 hist√≥rias s√£o exibidas e ent√£o as pr√≥ximas hist√≥rias s√£o exibidas ap√≥s clicar no bot√£o _More_
* Teste que garante que uma hist√≥ria √© removida da lista corretamente
* Teste que busca por um termo digitando e pressionando ENTER
* Teste que busca por um termo digitando e clicando no bot√£o de _Submit_
* Teste de busca r√°pida por √∫ltimos termos
* Teste que garante um m√°ximo de 5 bot√µes para os √∫ltimos termos buscados

## Os testes ainda pendentes

Al√©m dos testes j√° implementados, ainda h√° alguns √† serem escritos para garantir uma maior cobertura de c√≥digo. Eles s√£o:

* Teste que garante que os dados corretos s√£o exibidos em cada campo da lista
* Testes para ordena√ß√£o por t√≠tulo, autor, n√∫mero de coment√°rios e pontua√ß√£o
* Testes para situa√ß√µes de erro no servidor ou na rede

## Problemas com os testes atuais e pendentes

Apesar de j√° termos parte do c√≥digo coberto por testes e estarmos planejando aumentar a cobertura, a abordagem atual sofre de alguns problemas. Eles s√£o:

* Todos os cen√°rios dependem da API real do **Hackernews**, ou seja, caso esta esteja "fora do ar", todos os testes (com exce√ß√£o ao teste do _footer_) ir√£o falhar
* Uma vez que a API √© externa, n√£o temos como controlar o que ser√° retornado ao _frontend_, tornando alguns testes dif√≠ceis de serem implementados (por exemplo, os testes pendentes de ordena√ß√£o), ou mais complicados do que deveriam
* Testar situa√ß√µes de erro n√£o √© algo trivial quando se fala de testes _end-to-end_

## A tua miss√£o

Durante o curso, irei lhe apresentar um problema espec√≠fico de cada vez, algumas op√ß√µes para resolv√™-lo (umas melhores que outras) e exerc√≠cios para voc√™ resolver tais problemas e poder exercitar como melhorar a velocidade e independ√™ncia dos testes, al√©m de aumentar a cobertura de funcionalidades sendo exercitadas por testes automatizados.

Ao final do curso, voc√™ estar√° preparado(a) para colocar todo esse conhecimento em pr√°tica em projetos de software reais e em maior escala.

___

Tudo certo at√© aqui?

V√° para a [aula 2](./2.md) e vamos come√ßar a refatorar os testes. ü§ì
